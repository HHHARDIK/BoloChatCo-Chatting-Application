{% extends 'chat/base.html' %}
{% block content %}
<style>
  body{
    background-color : #2c2c2c;
  }
  .naam{
    margin: 2px;
    border: 5px solid #cbb300;
    min-height : 60px;
  }
</style>
<div class="container">
    {% for friend in friends %}
    <a href="{% url 'detail' pk=friend.profile.id %}" style="text-decoration:none;">
<ul class="list-group list-group">
    
    <li class="naam list-group-item d-flex justify-content-between align-items-start">
      <div class="ms-2 me-auto">
        <div class="fw-bold">{{friend.profile.name}}</div>
      </div>
      <span id="notify" class="notify badge bg-primary rounded-pill"></span>
    </li>
  </ul>
</a>
  {% endfor %}
</div>
<script>
  setInterval(getNotification , 1000)
  function getNotification(){
    let url = "{% url 'notification' %}"
    fetch(url)
    .then((response) => response.json())
    .then(data => {
      console.log(data)
      let chatNotificationBtn = document.getElementsByClassName("notify")
      for (let i=0; i<data.length; i++){
        chatNotificationBtn[i].innerText=data[i]
      }
    })
    .catch((error) => {
      console.error('Error:', error);
    });
  }
</script>

{% endblock content %}